## 트러블슈팅 보고서: UI 토글 시 입력 반복 문제
### 프로젝트: 인벤토리 시스템 개발
### 발생일: 2025-08-16

#### 1. 문제 현상 (Symptom)
- Enhanced Input System을 사용하여 'I' 키를 ToggleInventory() 함수에 바인딩했다.
- 키를 누르면 인벤토리 UI가 나타났다가 즉시 사라지거나, 의도치 않게 빠르게 깜빡이는 현상이 발생했다.
- 플레이어가 키를 한 번만 눌렀다고 생각함에도 불구하고, ToggleInventory() 함수가 짧은 시간 내에 여러 번 호출되는 것으로 확인되었다.

#### 2. 원인 분석 (Root Cause Analysis)
- 이 문제는 입력 처리 방식과 물리적인 키 입력 특성 사이의 상호작용 때문에 발생한다.
- 주요 원인: ETriggerEvent::Triggered 이벤트는 키가 눌리는 순간을 감지한다. 하지만 엔진의 프레임 속도는 매우 빨라서, 사람이 키를 눌렀다 떼는 찰나의 순간에도 여러 프레임이 지나갈 수 있다. 이 시간 동안 Triggered 이벤트가 한 번 이상 발생하거나, 미세한 키 떨림(Chattering)이 중복 입력으로 감지되어 ToggleInventory() 함수가 '열기'와 '닫기'를 순식간에 반복 실행했다.
- 근본적인 문제: 입력에 대한 '쿨다운(Cooldown)' 또는 '디바운싱(Debouncing)' 메커니즘이 부재했다. 시스템이 너무 정직하게 모든 입력을 즉시 처리하려고 했기 때문에 발생한 문제다.

#### 3. 해결 과정 (Resolution)
- 이 문제를 해결하기 위해 두 가지 접근법을 고려했으며, 각각 장단점이 명확했다.
1. 해결책 A: 입력 쿨다운 구현
   - 캐릭터 클래스에 bool bIsInventoryCooldown 플래그와 FTimerHandle을 추가했다.
   - ToggleInventory() 함수가 호출되면, 먼저 bIsInventoryCooldown 플래그를 확인하여 true이면 즉시 반환하도록 했다.
   - 함수 로직이 실행된 후에는 플래그를 true로 설정하고, SetTimer를 이용해 0.2초 뒤 플래그를 다시 false로 바꾸는 함수를 호출하도록 예약했다.
   - 결과: 안정적으로 작동했으나, 코드가 다소 복잡해졌다.

2. 해결책 B: 트리거 이벤트 변경 (최종 채택)
   - AShooterCharacter::SetupPlayerInputComponent 함수에서 BindAction을 호출하는 부분을 수정했다.
   - 트리거 이벤트를 ETriggerEvent::Triggered (누를 때) 에서 ETriggerEvent::Completed (뗄 때) 로 변경했다.
   - 결과: 한 번의 '누름+뗌' 동작에 대해 함수가 단 한 번만 호출되는 것이 보장되어 문제가 즉시 해결되었다. 코드가 매우 간결해졌다.

- 최종적으로 코드의 간결성과 문제 해결의 명확성을 고려하여 해결책 B를 채택했다.

#### 4. 교훈 및 예방 조치 (Lessons Learned & Prevention)
- 플레이어 입력은 항상 의도치 않은 중복이 발생할 수 있다는 점을 염두에 두어야 한다. 특히 토글(Toggle) 방식의 기능을 구현할 때는 반드시 중복 입력을 방지할 수 있는 장치를 마련해야 한다.
- 선택지:
  - 반응성이 중요하다면: Triggered 이벤트와 쿨다운 타이머를 조합한다.
  - 구현의 단순함과 입력의 정확성이 중요하다면: Completed (키를 뗄 때) 또는 Started (처음 눌렀을 때 한 번) 이벤트를 사용한다.
- 어떤 이벤트를 사용할지는 구현하려는 기능의 사용자 경험(UX)에 따라 결정해야 한다.
